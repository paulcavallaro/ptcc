cc_library(
  name='lexer',
  srcs=[
    'lexer.cc',
  ],
  hdrs=[
    'lexer.h',
  ],
  deps=[
    ':token',
    '@abseil-cpp//absl/strings:cord',
  ],
)

cc_library(
  name='token',
  srcs=[
    'token.cc',
  ],
  hdrs=[
    'token.h',
  ],
  deps=[
    ':identifier-database',
    ':token-type',
    '@abseil-cpp//absl/strings:strings',
    '@glog//:glog',
  ],
)

cc_library(
  name='token-type',
  srcs=[],
  hdrs=[
    'token-type.h',
  ],
  deps=[
  ],
)

cc_library(
  name='reader',
  srcs=[
    'reader.cc',
  ],
  hdrs=[
    'reader.h',
  ],
  deps=[
    '//util:fd-closer',
    '@abseil-cpp//absl/status:status',
    '@abseil-cpp//absl/strings:cord',
    '@abseil-cpp//absl/strings:strings',
  ],
)

cc_binary(
  name='tokenizer',
  srcs=[
    'tokenizer.cc',
  ],
  deps=[
    '//lexer:lexer',
    '//util:file-utils',
    '@abseil-cpp//absl/flags:parse',
    '@abseil-cpp//absl/strings:strings',
  ],
)

cc_library(
  name='identifier-database',
  srcs=[
    'identifier-database.cc',
  ],
  hdrs=[
    'identifier-database.h',
  ],
  deps=[
    ':token-type',
    '@abseil-cpp//absl/container:node_hash_map',
    '@abseil-cpp//absl/strings:strings',
  ],
)
